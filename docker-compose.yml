version: '3.8'

services:
  # Servicio de Base de Datos para Camiones
  camiones-db:
    image: postgres:16-alpine
    container_name: ms_camiones_db
    environment:
      POSTGRES_DB: camionesdb # <-- CAMBIADO: Coincide con application.properties
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
    ports:
      - "5435:5432" # <-- CAMBIADO: Puerto del Host 5435 (de tu README)
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - tpi_network # Agregado a la red

  # --- AGREGADO: Servicio pgAdmin ---
  pgadmin:
    image: dpage/pgadmin4
    container_name: pgadmin_tpi
    environment:
      PGADMIN_DEFAULT_EMAIL: admin@admin.com # (Email de tu README)
      PGADMIN_DEFAULT_PASSWORD: admin      # (Pass de tu README)
    ports:
      - "5050:80" # (Puerto 5050 de tu README)
    volumes:
      - pgadmin_data:/var/lib/pgadmin
    networks:
      - tpi_network # Agregado a la red
    depends_on:
      - camiones-db # Espera a que la BDD estÃ© lista

volumes:
  postgres_data:
  pgadmin_data: # Volumen para pgAdmin

networks:
  tpi_network: # Red compartida
    driver: bridge